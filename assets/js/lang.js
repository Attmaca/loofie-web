const translations = {
    tr: {
        "nav.contact": "Bize Ulaşın",
        "nav.download": "Uygulamayı İndir",
        "hero.badge": "Öğrenciler İçin Geliştirildi",
        "hero.title": "Hayallerine Giden Yol<br><span class=\"text-transparent bg-clip-text bg-gradient-to-r from-brand-purple to-brand-teal text-glow\">Disiplinle Başlar.</span>",
        "hero.subtitle": "Sınav maratonunda (YKS, LGS) kaybolma. Loofie; rutinlerini planlar, seni motive eder ve gelişimin için gereken her şeyi tek bir ekranda sunar.",
        "features.daily": "Günlük Rutinler",
        "features.daily.desc": "Günün önceliklerini belirle, tik at, ilerlemeni gör. Kaos yok, düzen var.",
        "features.exam": "Sınav Geri Sayımı",
        "features.exam.desc": "Önemli tarihler (YKS, Yazılılar) gözünün önünde olsun. Zamanı yönet.",
        "features.buddies": "Çalışma Arkadaşları",
        "features.buddies.desc": "Yalnız değilsin. Arkadaşlarınla gruplar kur, rekabet et ve birlikte başar.",
        "showcase.title": "Kişisel Gelişiminde <span class=\"text-brand-purple\">Yeni Bir Seviye</span>",
        "showcase.subtitle": "Verilerini analiz et, AI koçunla konuş ve odaklanarak çalış.",
        "showcase.analysis": "Detaylı Analiz",
        "showcase.analysis.desc": "Haftalık performansını, en verimli saatlerini ve rekor serini gör.",
        "showcase.focus": "Derin Odaklanma",
        "showcase.focus.desc": "Pomodoro tekniği ile dikkatini dağıtmadan hedefine kilitlen.",
        "showcase.motivation": "Sosyal Motivasyon",
        "showcase.motivation.desc": "Grup sohbetleri ve liderlik tablolarıyla çalışma isteğini canlı tut.",
        "ai.badge": "Yapay Zeka Destekli",
        "ai.title": "Sanal Koçunla <br><span class=\"text-brand-purple\">Sınırları Zorla</span>",
        "ai.subtitle": "Loofie AI; sana özel çalışır. Anlamadığın konuyu sor, senin için sınav hazırlasın veya motivasyonun düştüğünde seni toparlasın.",
        "ai.studio": "Akıllı Stüdyo",
        "ai.studio.desc": "Tüm araçlar elinin altında.",
        "ai.tutor": "7/24 Özel Ders",
        "ai.tutor.desc": "Anında konu anlatımı.",
        "ai.bank": "Soru Bankası",
        "ai.bank.desc": "Saniyeler içinde sınav ol.",
        "footer.rights": "Loofie © 2025",
        "footer.privacy": "Gizlilik",
        "footer.support": "Destek & Öneri",
        "privacy.title": "Gizlilik Politikası",
        "privacy.date": "Son Güncelleme: 21 Aralık 2025",
        "privacy.back": "Ana Sayfaya Dön",
        "privacy.intro.title": "1. Giriş",
        "privacy.intro.text": "Loofie (\"biz\", \"bizim\" veya \"uygulama\") olarak gizliliğinize önem veriyoruz. Bu Gizlilik Politikası, uygulamamızı kullandığınızda bilgilerinizi nasıl topladığımızı, kullandığımızı ve koruduğumuzu açıklar.",
        "privacy.collection.title": "2. Toplanan Bilgiler",
        "privacy.collection.list1": "<strong>Hesap Bilgileri:</strong> Uygulamaya kaydolurken sağladığınız e-posta adresi ve kullanıcı adı.",
        "privacy.collection.list2": "<strong>Kullanım Verileri:</strong> Pomodoro sayaç süreleri, tamamlanan hedefler ve uygulama içi etkinlikler (anonim olarak).",
        "privacy.collection.list3": "<strong>Cihaz Bilgileri:</strong> Cihaz modeli, işletim sistemi sürümü gibi teknik veriler (hata ayıklama için).",
        "privacy.usage.title": "3. Verilerin Kullanımı",
        "privacy.usage.text": "Topladığımız verileri şu amaçlarla kullanırız:",
        "privacy.usage.list1": "Hizmetlerimizi sağlamak ve iyileştirmek.",
        "privacy.usage.list2": "Kişiselleştirilmiş deneyim sunmak (örneğin, çalışma istatistikleri).",
        "privacy.usage.list3": "Hesap güvenliğini sağlamak.",
        "privacy.security.title": "4. Veri Güvenliği",
        "privacy.security.text": "Verilerinizi korumak için endüstri standardı güvenlik önlemleri (SSL şifreleme, güvenli sunucular) kullanıyoruz. Ancak, internet üzerinden yapılan hiçbir iletimin %100 güvenli olmadığını unutmayın.",
        "privacy.contact.title": "5. İletişim",
        "privacy.contact.text": "Gizlilik politikamızla ilgili sorularınız için <a href=\"mailto:support@loofie.app\" class=\"text-brand-teal hover:underline\">support@loofie.app</a> adresinden bizimle iletişime geçebilirsiniz."
    },
    en: {
        "nav.contact": "Contact Us",
        "nav.download": "Download App",
        "hero.badge": "Developed for Students",
        "hero.title": "The Road to Dreams<br><span class=\"text-transparent bg-clip-text bg-gradient-to-r from-brand-purple to-brand-teal text-glow\">Starts with Discipline.</span>",
        "hero.subtitle": "Don't get lost in the exam marathon. Loofie plans your routines, motivates you, and offers everything you need for your development on a single screen.",
        "features.daily": "Daily Routines",
        "features.daily.desc": "Set daily priorities, tick them off, see your progress. No chaos, just order.",
        "features.exam": "Exam Countdown",
        "features.exam.desc": "Keep important dates in front of you. Manage time.",
        "features.buddies": "Study Buddies",
        "features.buddies.desc": "You are not alone. Create groups with friends, compete, and succeed together.",
        "showcase.title": "A New Level in <span class=\"text-brand-purple\">Personal Development</span>",
        "showcase.subtitle": "Analyze your data, talk to your AI coach, and work with focus.",
        "showcase.analysis": "Detailed Analysis",
        "showcase.analysis.desc": "See your weekly performance, most productive hours, and record streaks.",
        "showcase.focus": "Deep Focus",
        "showcase.focus.desc": "Lock onto your goal without distraction using the Pomodoro technique.",
        "showcase.motivation": "Social Motivation",
        "showcase.motivation.desc": "Keep your desire to study alive with group chats and leaderboards.",
        "ai.badge": "AI Powered",
        "ai.title": "Push Limits with <br><span class=\"text-brand-purple\">Your Virtual Coach</span>",
        "ai.subtitle": "Loofie AI works specifically for you. Ask about topics you don't understand, let it prepare exams for you, or get motivated when you feel down.",
        "ai.studio": "Smart Studio",
        "ai.studio.desc": "All tools at your fingertips.",
        "ai.tutor": "24/7 Private Tutoring",
        "ai.tutor.desc": "Instant topic explanation.",
        "ai.bank": "Question Bank",
        "ai.bank.desc": "Take an exam in seconds.",
        "footer.rights": "Loofie © 2025",
        "footer.privacy": "Privacy",
        "footer.support": "Support & Suggestions",
        "privacy.title": "Privacy Policy",
        "privacy.date": "Last Updated: December 21, 2025",
        "privacy.back": "Back to Home",
        "privacy.intro.title": "1. Introduction",
        "privacy.intro.text": "At Loofie (\"we\", \"us\", or \"the application\"), we value your privacy. This Privacy Policy explains how we collect, use, and protect your information when you use our application.",
        "privacy.collection.title": "2. Information Collected",
        "privacy.collection.list1": "<strong>Account Information:</strong> Email address and username provided when registering for the application.",
        "privacy.collection.list2": "<strong>Usage Data:</strong> Pomodoro timer durations, completed goals, and in-app activities (anonymously).",
        "privacy.collection.list3": "<strong>Device Information:</strong> Technical data such as device model, operating system version (for debugging).",
        "privacy.usage.title": "3. Use of Data",
        "privacy.usage.text": "We use the data we collect for the following purposes:",
        "privacy.usage.list1": "To provide and improve our services.",
        "privacy.usage.list2": "To provide a personalized experience (e.g., study statistics).",
        "privacy.usage.list3": "To ensure account security.",
        "privacy.security.title": "4. Data Security",
        "privacy.security.text": "We use industry-standard security measures (SSL encryption, secure servers) to protect your data. However, please note that no transmission over the internet is 100% secure.",
        "privacy.contact.title": "5. Contact",
        "privacy.contact.text": "For questions about our privacy policy, you can contact us at <a href=\"mailto:support@loofie.app\" class=\"text-brand-teal hover:underline\">support@loofie.app</a>."
    }
};

function setLanguage(lang) {
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;

    // Update text content
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            // Handle HTML content (for spans and complex formatting)
            if (translations[lang][key].includes('<') || element.children.length > 0) {
                element.innerHTML = translations[lang][key];
            } else {
                element.innerText = translations[lang][key];
            }
        }
    });

    // Update images
    const screenImages = {
        "hero_screen": { tr: "assets/images/hero_screen.png", en: "assets/images/hero_screen_en.png" },
        "stats_screen": { tr: "assets/images/stats_screen.png", en: "assets/images/stats_screen_en.png" },
        "focus_screen": { tr: "assets/images/focus_screen.png", en: "assets/images/focus_screen_en.png" },
        "chat_screen": { tr: "assets/images/chat_screen.png", en: "assets/images/chat_screen_en.png" },
        "ai_studio": { tr: "assets/images/ai_studio.png", en: "assets/images/ai_studio_en.png" },
        "ai_chat": { tr: "assets/images/ai_chat.png", en: "assets/images/ai_chat_en.png" },
        "ai_exam": { tr: "assets/images/ai_exam.png", en: "assets/images/ai_exam.png" }
    };

    document.querySelectorAll('[data-img]').forEach(img => {
        const key = img.getAttribute('data-img');
        if (screenImages[key] && screenImages[key][lang]) {
            img.src = screenImages[key][lang];
        }
    });

    // Hide modal if it exists
    const modal = document.getElementById('language-modal');
    if (modal) {
        modal.style.opacity = '0';
        setTimeout(() => {
            modal.style.display = 'none';
        }, 500);
    }
}

// Check on load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('language');
    if (savedLang) {
        setLanguage(savedLang);
    } else {
        // Show modal
        const modal = document.getElementById('language-modal');
        if (modal) {
            modal.style.display = 'flex';
            // Timeout to allow display:flex to apply before opacity transition
            setTimeout(() => {
                modal.style.opacity = '1';
            }, 10);
        }
    }
});
