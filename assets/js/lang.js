const translations = {
    tr: {
        "nav.contact": "Bize Ulaşın",
        "nav.login": "Giriş Yap",
        "hero.badge": "Öğrenciler İçin Geliştirildi",
        "hero.title": "Hayallerine Giden Yol<br><span class=\"text-transparent bg-clip-text bg-gradient-to-r from-brand-purple to-brand-teal text-glow\">Disiplinle Başlar.</span>",
        "hero.subtitle": "Sınav maratonunda (YKS, LGS) kaybolma. Loofie; rutinlerini planlar, seni motive eder ve gelişimin için gereken her şeyi tek bir ekranda sunar.",
        "features.daily": "Günlük Rutinler",
        "features.daily.desc": "Günün önceliklerini belirle, tik at, ilerlemeni gör. Kaos yok, düzen var.",
        "features.exam": "Sınav Geri Sayımı",
        "features.exam.desc": "Önemli tarihler (YKS, Yazılılar) gözünün önünde olsun. Zamanı yönet.",
        "features.buddies": "Çalışma Arkadaşları",
        "features.buddies.desc": "Yalnız değilsin. Arkadaşlarınla gruplar kur, rekabet et ve birlikte başar.",
        "showcase.title": "Kişisel Gelişiminde <span class=\"text-brand-purple\">Yeni Bir Seviye</span>",
        "showcase.subtitle": "Verilerini analiz et, AI koçunla konuş ve odaklanarak çalış.",
        "showcase.analysis": "Detaylı Analiz",
        "showcase.analysis.desc": "Haftalık performansını, en verimli saatlerini ve rekor serini gör.",
        "showcase.focus": "Derin Odaklanma",
        "showcase.focus.desc": "Pomodoro tekniği ile dikkatini dağıtmadan hedefine kilitlen.",
        "showcase.motivation": "Sosyal Motivasyon",
        "showcase.motivation.desc": "Grup sohbetleri ve liderlik tablolarıyla çalışma isteğini canlı tut.",
        "ai.badge": "Yapay Zeka Destekli",
        "ai.title": "Sanal Koçunla <br><span class=\"text-brand-purple\">Sınırları Zorla</span>",
        "ai.subtitle": "Loofie AI; sana özel çalışır. Anlamadığın konuyu sor, senin için sınav hazırlasın veya motivasyonun düştüğünde seni toparlasın.",
        "ai.studio": "Akıllı Stüdyo",
        "ai.studio.desc": "Tüm araçlar elinin altında.",
        "ai.tutor": "7/24 Özel Ders",
        "ai.tutor.desc": "Anında konu anlatımı.",
        "ai.bank": "Soru Bankası",
        "ai.bank.desc": "Saniyeler içinde sınav ol.",
        "footer.rights": "Loofie © 2025",
        "footer.privacy": "Gizlilik",
        "footer.support": "Destek & Öneri",

        // Privacy Policy (Updated)
        "privacy.title": "Gizlilik Politikası",
        "privacy.subtitle": "Loofie (\"biz\", \"bizim\" veya \"Uygulama\") olarak gizliliğinize en üst düzeyde önem veriyoruz. Bu politika, kişisel verilerinizin nasıl toplandığını, kullanıldığını ve korunduğunu şeffaf bir şekilde açıklar.",
        "privacy.date": "Son Güncelleme: 21 Aralık 2025",
        "privacy.back": "Ana Sayfa",
        "privacy.collection.title": "1. Topladığımız Bilgiler",
        "privacy.usage.title": "2. Bilgilerinizi Nasıl Kullanıyoruz?",
        "privacy.thirdparty.title": "3. Üçüncü Taraf Hizmetler",
        "privacy.security.title": "4. Veri Güvenliği",
        "privacy.security.text": "Verilerinizi, endüstri standardı şifreleme yöntemleri (SSL/TLS) ile korunmaktadır. Sunucularımız, sıkı güvenlik protokollerine sahip veri merkezlerinde barındırılmaktadır. Ancak dijital dünyada %100 güvenliğin garanti edilemeyeceğini hatırlatır, hesabınızın güvenliği için güçlü şifreler kullanmanızı öneririz.",
        "privacy.rights.title": "5. Haklarınız",
        "privacy.contact.title": "6. İletişim",
        "privacy.collection.account.title": "Hesap Bilgileri",
        "privacy.collection.account.text": "Uygulamaya kayıt olurken sağladığınız e-posta adresi, kullanıcı adı ve isteğe bağlı profil fotoğrafı. Google ile giriş yapmanız durumunda, temel profil bilgileriniz (isim, e-posta, profil resmi) alınır.",
        "privacy.collection.usage.title": "Kullanım Verileri",
        "privacy.collection.usage.text": "Pomodoro odaklanma süreleriniz, hedefleri tamamlama durumunuz, uygulama içi etkileşimleriniz ve oluşturduğunuz çalışma grupları. Bu veriler, size istatistikler sunmak için kullanılır.",
        "privacy.collection.device.title": "Teknik Veriler",
        "privacy.collection.device.text": "Cihaz modeli, işletim sistemi sürümü, IP adresi ve çökme raporları. Bu veriler, uygulama performansını izlemek ve hataları gidermek için anonim olarak işlenir.",
        "privacy.usage.list1": "<strong>Hizmet Sunumu:</strong> Hesabınızı oluşturmak, verilerinizi cihazlar arasında senkronize etmek ve temel özellikleri sağlamak.",
        "privacy.usage.list2": "<strong>Kişiselleştirme:</strong> Size özel çalışma istatistikleri, başarı rozetleri ve AI destekli öneriler sunmak.",
        "privacy.usage.list3": "<strong>İletişim:</strong> Önemli güncellemeler, güvenlik uyarıları veya (izninizle) yeni özellikler hakkında sizi bilgilendirmek.",
        "privacy.usage.list4": "<strong>Analiz ve İyileştirme:</strong> Uygulamanın hangi özelliklerinin daha fazla kullanıldığını anlamak ve kullanıcı deneyimini geliştirmek.",
        "privacy.thirdparty.text": "Verileriniz satılmaz. Ancak, altyapı ve analiz hizmetleri için güvenilir üçüncü taraf sağlayıcılarla çalışıyoruz:",
        "privacy.thirdparty.firebase.title": "Google Firebase",
        "privacy.thirdparty.firebase.text": "Veritabanı ve Kimlik Doğrulama",
        "privacy.thirdparty.analytics.title": "Google Analytics",
        "privacy.thirdparty.analytics.text": "Anonim Kullanım Analizi",
        "privacy.rights.text": "Kişisel verileriniz üzerinde tam kontrole sahipsiniz. Uygulama ayarları üzerinden veya bizimle iletişime geçerek şunları yapabilirsiniz:",
        "privacy.rights.list1": "Verilerinize erişme ve kopyasını alma",
        "privacy.rights.list2": "Hatalı bilgileri düzeltme",
        "privacy.rights.list3": "Hesabınızı ve verilerinizi silme",
        "privacy.rights.list4": "İşleme faaliyetlerine itiraz etme"
    },
    en: {
        "nav.contact": "Contact Us",
        "nav.login": "Log In",
        "hero.badge": "Developed for Students",
        "hero.title": "The Road to Dreams<br><span class=\"text-transparent bg-clip-text bg-gradient-to-r from-brand-purple to-brand-teal text-glow\">Starts with Discipline.</span>",
        "hero.subtitle": "Don't get lost in the exam marathon. Loofie plans your routines, motivates you, and offers everything you need for your development on a single screen.",
        "features.daily": "Daily Routines",
        "features.daily.desc": "Set daily priorities, tick them off, see your progress. No chaos, just order.",
        "features.exam": "Exam Countdown",
        "features.exam.desc": "Keep important dates in front of you. Manage time.",
        "features.buddies": "Study Buddies",
        "features.buddies.desc": "You are not alone. Create groups with friends, compete, and succeed together.",
        "showcase.title": "A New Level in <span class=\"text-brand-purple\">Personal Development</span>",
        "showcase.subtitle": "Analyze your data, talk to your AI coach, and work with focus.",
        "showcase.analysis": "Detailed Analysis",
        "showcase.analysis.desc": "See your weekly performance, most productive hours, and record streaks.",
        "showcase.focus": "Deep Focus",
        "showcase.focus.desc": "Lock onto your goal without distraction using the Pomodoro technique.",
        "showcase.motivation": "Social Motivation",
        "showcase.motivation.desc": "Keep your desire to study alive with group chats and leaderboards.",
        "ai.badge": "AI Powered",
        "ai.title": "Push Limits with <br><span class=\"text-brand-purple\">Your Virtual Coach</span>",
        "ai.subtitle": "Loofie AI works specifically for you. Ask about topics you don't understand, let it prepare exams for you, or get motivated when you feel down.",
        "ai.studio": "Smart Studio",
        "ai.studio.desc": "All tools at your fingertips.",
        "ai.tutor": "24/7 Private Tutoring",
        "ai.tutor.desc": "Instant topic explanation.",
        "ai.bank": "Question Bank",
        "ai.bank.desc": "Take an exam in seconds.",
        "footer.rights": "Loofie © 2025",
        "footer.privacy": "Privacy",
        "footer.support": "Support & Suggestions",

        // Privacy Policy (Updated)
        "privacy.title": "Privacy Policy",
        "privacy.subtitle": "At Loofie (\"we\", \"us\", or \"the App\"), we prioritize your privacy. This policy transparently explains how your personal data is collected, used, and protected.",
        "privacy.date": "Last Updated: December 21, 2025",
        "privacy.back": "Home",
        "privacy.collection.title": "1. Information Collected",
        "privacy.usage.title": "2. How We Use Your Data?",
        "privacy.thirdparty.title": "3. Third Party Services",
        "privacy.security.title": "4. Data Security",
        "privacy.security.text": "Your data is protected by industry-standard encryption methods (SSL/TLS). Our servers are hosted in data centers with strict security protocols. However, please note that no digital transmission is 100% secure, and we recommend using strong passwords for your account security.",
        "privacy.rights.title": "5. Your Rights",
        "privacy.contact.title": "6. Contact",
        "privacy.contact.text": "Feel free to contact us with any questions, suggestions, or data requests regarding our privacy policy:",
        "privacy.collection.account.title": "Account Information",
        "privacy.collection.account.text": "Email address, username provided during registration, and optional profile photo. If logging in with Google, basic profile info (name, email, profile pic) is retrieved.",
        "privacy.collection.usage.title": "Usage Data",
        "privacy.collection.usage.text": "Pomodoro focus durations, goal completion status, in-app interactions, and study groups you create. This data is used to provide you with statistics.",
        "privacy.collection.device.title": "Technical Data",
        "privacy.collection.device.text": "Device model, OS version, IP address, and crash reports. This data is processed anonymously to monitor app performance and troubleshoot errors.",
        "privacy.usage.list1": "<strong>Service Delivery:</strong> To create your account, sync your data across devices, and provide core features.",
        "privacy.usage.list2": "<strong>Personalization:</strong> To provide personalized study stats, achievement badges, and AI-powered recommendations.",
        "privacy.usage.list3": "<strong>Communication:</strong> To inform you about important updates, security alerts, or (with permission) new features.",
        "privacy.usage.list4": "<strong>Analysis & Improvement:</strong> To understand which features are used most and improve user experience.",
        "privacy.thirdparty.text": "Your data is not sold. However, we work with trusted third-party providers for infrastructure and analytics services:",
        "privacy.thirdparty.firebase.title": "Google Firebase",
        "privacy.thirdparty.firebase.text": "Database and Authentication",
        "privacy.thirdparty.analytics.title": "Google Analytics",
        "privacy.thirdparty.analytics.text": "Anonymous Usage Analysis",
        "privacy.rights.text": "You have full control over your personal data. You can do the following through app settings or by contacting us:",
        "privacy.rights.list1": "Access and obtain a copy of your data",
        "privacy.rights.list2": "Correct inaccurate information",
        "privacy.rights.list3": "Delete your account and data",
        "privacy.rights.list4": "Object to processing activities"
    }
};

function setLanguage(lang) {
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;

    // Update text content
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            // Handle HTML content (for spans and complex formatting)
            if (translations[lang][key].includes('<') || element.children.length > 0) {
                element.innerHTML = translations[lang][key];
            } else {
                element.innerText = translations[lang][key];
            }
        }
    });

    // Update images
    const screenImages = {
        "hero_screen": { tr: "assets/images/hero_screen.png", en: "assets/images/hero_screen_en.png" },
        "stats_screen": { tr: "assets/images/stats_screen.png", en: "assets/images/stats_screen_en.png" },
        "focus_screen": { tr: "assets/images/focus_screen.png", en: "assets/images/focus_screen_en.png" },
        "chat_screen": { tr: "assets/images/chat_screen.png", en: "assets/images/chat_screen_en.png" },
        "ai_studio": { tr: "assets/images/ai_studio.png", en: "assets/images/ai_studio_en.png" },
        "ai_chat": { tr: "assets/images/ai_chat.png", en: "assets/images/ai_chat_en.png" },
        "ai_exam": { tr: "assets/images/ai_exam.png", en: "assets/images/ai_exam.png" },
        "app_store": {
            tr: "https://upload.wikimedia.org/wikipedia/commons/e/e6/Download_on_the_App_Store_Badge_TR.svg",
            en: "https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg"
        },
        "google_play": {
            tr: "https://upload.wikimedia.org/wikipedia/commons/c/cd/Google_Play_Store_badge_TR.svg",
            en: "https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg"
        }
    };

    document.querySelectorAll('[data-img]').forEach(img => {
        const key = img.getAttribute('data-img');
        if (screenImages[key] && screenImages[key][lang]) {
            img.src = screenImages[key][lang];
        }
    });

    // Hide modal if it exists
    const modal = document.getElementById('language-modal');
    if (modal) {
        modal.style.opacity = '0';
        setTimeout(() => {
            modal.style.display = 'none';
        }, 500);
    }
}

// Check on load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('language');
    if (savedLang) {
        setLanguage(savedLang);
    } else {
        // Show modal
        const modal = document.getElementById('language-modal');
        if (modal) {
            modal.style.display = 'flex';
            // Timeout to allow display:flex to apply before opacity transition
            setTimeout(() => {
                modal.style.opacity = '1';
            }, 10);
        }
    }
});
